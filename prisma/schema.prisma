generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Syndicate {
  id       String @id @default(uuid())
  name     String
  username String @unique
  password String

  Block Block[]
}

model Resident {
  id          String    @id @default(uuid())
  name        String
  apartament  Int
  cpf         String    @unique
  nonPayments Int?
  joinAt      DateTime  @default(now())
  leftAt      DateTime?

  building   Building @relation(fields: [buildingId], references: [id])
  buildingId String

  Invoices Invoices[]
}

model Building {
  id             String @id @default(uuid())
  buildingNumber Int    @unique

  block   Block  @relation(fields: [blockId], references: [id])
  blockId String

  Resident Resident[]
}

model Block {
  id     String @id @default(uuid())
  number Int    @unique

  syndicate   Syndicate @relation(fields: [syndicateId], references: [id])
  syndicateId String

  Building Building[]
}

model Invoices {
  id     String  @id @default(uuid())
  month  Int
  Amount Int
  isPaid Boolean @default(false)

  resident   Resident @relation(fields: [residentId], references: [id])
  residentId String
}
